<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>TDDD82 - Healthcare</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
    crossorigin="anonymous">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>
    $.ajaxSetup({
  headers : {
    'Token' : 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJtb2JpbGUiLCJleHAiOjE1MjE2MjI4OTksImlhdCI6MTQ5MDA4Njg5OSwiaXNzIjoiU2p1a3bDpXJkc2dydXBwZW4iLCJzdWIiOiI1NTUifQ.IdsTVSAhUdl_Tl-UavQIyZwvQL1OORn3J9VlXR2GUNPkktNck8wjBY8NhNiRub6eW5qTgelU6p_HeUjHXH73o55UjQE9iB4auq-lnzj4uLWfX19oKVDHtAn4QKNjc_VTFENTXajwQtJMj9-vdHq4qteWivt-rX4xkiqZ2lL7obWgmLV1QU58S7r1bVV9F4Ah8xuyAvZnoQ64Sx23AKrXID5XOJJ-qhGajf13gpeRF3NA8rY5mX7oDQG7uY2INOGe9Wn8MR_0u6Elw4awtjntyEhAs_7oT8sFCeGHnXwE7UwiGJ6NI4ybAJdr9kU7WClqolxz5_PVWBdgZ_NT57cPo7s1_evvepSKe2K21p5Egq_Yz5Hbf5V6Tq1S9tdFtC9iaDQ7auB9pva71_XviBaXLQtja6ybw24WuVUhNc_Cj3tLLqn1z2Uc8lW0KQc3hgwIZp9khPJbKGmvXU9NCVfrW6PYmMkLRBIxlc9GD7ybiUI_vwttHdydJZCMQSoPfzNFYFUbKE9OpmkfuXf3ltzfOOi9Z815tXIQB0hUzYZnvp0gehoxfGcmUCnZgpRRL33xzkhb_rPR6h0_rsEgiuPc11oj9ww78F5njzjmokEqlzm23x_0T4XAbI1hmTWwDBHGw7L_MFau-R88Xw4a4BF4pGZF_OeNat2J_Joh9GHmYxc',
    'AdminToken' : 'admin'
    }
});
</script>
<body>
  <div class="container">
    <h1>TDDD82 - Administration</h1>
    <div class="col-md-4">
      <h3>Users</h3>
      <table  class="table table-bordered">
          <thead>
            <tr>
                <th>Name</th>
                <th>Number</th> 
                <th>Card-ID</th>
            </tr>
          </thead>
          <tbody id="users">

          </tbody>
</table>

    </div>
  </div>
  <div class="container">
    <div class="col-md-4">
      <h3>Contacts</h3>
      <ul id="contacts" class="list-group">
        
      </ul>
    </div>
  </div>

      <script>
          getContacts(555);
          getUsers();
        function getContacts(number){
        $.getJSON("/contacts/"+number, function (contacts) {
            document.getElementById("contacts").innerHTML = "";
            for(var i in contacts){
                var entry = document.createElement('li');
                var span = document.createElement('span');
                entry.className = "list-group-item";
                span.className = "badge";
                span.appendChild(document.createTextNode(contacts[i].phonenumber));
                entry.appendChild(document.createTextNode(contacts[i].name));
                entry.appendChild(span);
                document.getElementById("contacts").appendChild(entry);
            }
        });
        }
        function getUsers(){
        $.getJSON("/users", function (users) {
            document.getElementById("users").innerHTML = "";            
            for(var i in users){
                var row = document.createElement('tr');
                var nameTD = document.createElement('td');
                var numberTD = document.createElement('td');
                var cardTD = document.createElement('td');
                nameTD.appendChild(document.createTextNode(users[i].name));
                numberTD.appendChild(document.createTextNode(users[i].number));
                cardTD.appendChild(document.createTextNode(users[i].card));
                row.appendChild(nameTD);
                row.appendChild(numberTD);
                row.appendChild(cardTD);
                document.getElementById("users").appendChild(row);
            }
        });
        }
        function removeContacts(source, dest){
            $.ajax({
            url: '/contacts/'+source+'/'+dest,
            type: 'DELETE',
            success: function(result) {
                alert(source+" nolonger have "+dest+" as contact");
            }
        });
        }
              </script>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"></script>
</body>

</html>